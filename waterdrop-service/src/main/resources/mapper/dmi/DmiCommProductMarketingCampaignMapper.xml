<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.teekee.waterdropservice.mapper.dmi.DmiCommProductMarketingCampaignMapper" >
  <resultMap id="BaseResultMap" type="com.teekee.waterdropservice.entity.dmi.DmiCommProductMarketingCampaign" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="store_id" property="storeId" jdbcType="INTEGER" />
    <result column="company_id" property="companyId" jdbcType="INTEGER" />
    <result column="campaign_name" property="campaignName" jdbcType="VARCHAR" />
    <result column="description" property="description" jdbcType="VARCHAR" />
    <result column="purchase_date" property="purchaseDate" jdbcType="TIMESTAMP" />
    <result column="install_date" property="installDate" jdbcType="TIMESTAMP" />
    <result column="service_id" property="serviceId" jdbcType="INTEGER" />
    <result column="pay_balance" property="payBalance" jdbcType="DECIMAL" />
    <result column="register" property="register" jdbcType="VARCHAR" />
    <result column="register_type" property="registerType" jdbcType="VARCHAR" />
    <result column="register_code" property="registerCode" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="VARCHAR" />
    <result column="flag_avaliable" property="flagAvaliable" jdbcType="BIT" />
    <result column="flag_deleted" property="flagDeleted" jdbcType="BIT" />
    <result column="flag_charge_singal" property="flagChargeSingal" jdbcType="BIT" />
    <result column="flag_info_confirm" property="flagInfoConfirm" jdbcType="BIT" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="create_person" property="createPerson" jdbcType="INTEGER" />
    <result column="update_person" property="updatePerson" jdbcType="INTEGER" />
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="brand_id" property="brandId" jdbcType="INTEGER" />
    <result column="flag_vendor" property="flagVendor" jdbcType="BIT" />
    <result column="service_contact_id" property="serviceContactId" jdbcType="INTEGER" />
    <result column="product_code" property="productCode" jdbcType="VARCHAR" />
    <result column="isp_service" property="ispService" jdbcType="VARCHAR"/>
    <result column="flag_charge_agency" property="flagChargeAgency" jdbcType="BIT" />
    <result column="memo" property="memo" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    id, store_id, company_id, campaign_name, description, purchase_date, install_date, 
    service_id, pay_balance, register, register_type, register_code, status,
    flag_avaliable, flag_deleted, flag_charge_singal, flag_info_confirm, create_time, 
    create_person, update_person, update_time, brand_id, flag_vendor, service_contact_id, product_code, isp_service,
    flag_charge_agency, memo
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select 
    <include refid="Base_Column_List" />
    from dmi_comm_product_marketing_campaign
    where id = #{id,jdbcType=INTEGER}
  </select>
  <insert id="insertSelective" parameterType="com.teekee.waterdropservice.entity.dmi.DmiCommProductMarketingCampaign" >
    <selectKey resultType="java.lang.Integer" order="AFTER" keyProperty="id">
      SELECT LAST_INSERT_ID() AS id
    </selectKey>
    insert into dmi_comm_product_marketing_campaign
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="storeId != null" >
        store_id,
      </if>
      <if test="companyId != null" >
        company_id,
      </if>
      <if test="campaignName != null" >
        campaign_name,
      </if>
      <if test="description != null" >
        description,
      </if>
      <if test="purchaseDate != null" >
        purchase_date,
      </if>
      <if test="installDate != null" >
        install_date,
      </if>
      <if test="serviceId != null" >
        service_id,
      </if>
      <if test="payBalance != null" >
        pay_balance,
      </if>
      <if test="register != null" >
        register,
      </if>
      <if test="registerType != null" >
        register_type,
      </if>
      <if test="registerCode != null" >
        register_code,
      </if>
      <if test="status != null" >
        status,
      </if>
      <if test="flagAvaliable != null" >
        flag_avaliable,
      </if>
      <if test="flagDeleted != null" >
        flag_deleted,
      </if>
      <if test="flagChargeSingal != null" >
        flag_charge_singal,
      </if>
      <if test="flagInfoConfirm != null" >
        flag_info_confirm,
      </if>
      <if test="createTime != null" >
        create_time,
      </if>
      <if test="createPerson != null" >
        create_person,
      </if>
      <if test="updatePerson != null" >
        update_person,
      </if>
      <if test="updateTime != null" >
        update_time,
      </if>
      <if test="brandId != null" >
        brand_id,
      </if>
      <if test="flagVendor != null" >
        flag_vendor,
      </if>
      <if test="serviceContactId != null" >
        service_contact_id,
      </if>
      <if test="productCode != null" >
        product_code,
      </if>
      <if test="ispService != null" >
        isp_service,
      </if>
      <if test="flagChargeAgency != null" >
        flag_charge_agency,
      </if>
      <if test="memo != null" >
        memo,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="storeId != null" >
        #{storeId,jdbcType=INTEGER},
      </if>
      <if test="companyId != null" >
        #{companyId,jdbcType=INTEGER},
      </if>
      <if test="campaignName != null" >
        #{campaignName,jdbcType=VARCHAR},
      </if>
      <if test="description != null" >
        #{description,jdbcType=VARCHAR},
      </if>
      <if test="purchaseDate != null" >
        #{purchaseDate,jdbcType=TIMESTAMP},
      </if>
      <if test="installDate != null" >
        #{installDate,jdbcType=TIMESTAMP},
      </if>
      <if test="serviceId != null" >
        #{serviceId,jdbcType=INTEGER},
      </if>
      <if test="payBalance != null" >
        #{payBalance,jdbcType=DECIMAL},
      </if>
      <if test="register != null" >
        #{register,jdbcType=VARCHAR},
      </if>
      <if test="registerType != null" >
        #{registerType,jdbcType=VARCHAR},
      </if>
      <if test="registerCode != null" >
        #{registerCode,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        #{status,jdbcType=VARCHAR},
      </if>
      <if test="flagAvaliable != null" >
        #{flagAvaliable,jdbcType=BIT},
      </if>
      <if test="flagDeleted != null" >
        #{flagDeleted,jdbcType=BIT},
      </if>
      <if test="flagChargeSingal != null" >
        #{flagChargeSingal,jdbcType=BIT},
      </if>
      <if test="flagInfoConfirm != null" >
        #{flagInfoConfirm,jdbcType=BIT},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createPerson != null" >
        #{createPerson,jdbcType=INTEGER},
      </if>
      <if test="updatePerson != null" >
        #{updatePerson,jdbcType=INTEGER},
      </if>
      <if test="updateTime != null" >
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="brandId != null" >
        #{brandId,jdbcType=INTEGER},
      </if>
      <if test="flagVendor != null" >
        #{flagVendor,jdbcType=BIT},
      </if>
      <if test="serviceContactId != null" >
        #{serviceContactId,jdbcType=INTEGER},
      </if>
      <if test="productCode != null" >
        #{productCode,jdbcType=VARCHAR},
      </if>
      <if test="ispService != null" >
        #{ispService,jdbcType=VARCHAR},
      </if>
      <if test="flagChargeAgency != null" >
        #{flagChargeAgency,jdbcType=BIT},
      </if>
      <if test="memo != null" >
        #{memo,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.teekee.waterdropservice.entity.dmi.DmiCommProductMarketingCampaign" >
    update dmi_comm_product_marketing_campaign
    <set >
      <if test="storeId != null" >
        store_id = #{storeId,jdbcType=INTEGER},
      </if>
      <if test="companyId != null" >
        company_id = #{companyId,jdbcType=INTEGER},
      </if>
      <if test="campaignName != null" >
        campaign_name = #{campaignName,jdbcType=VARCHAR},
      </if>
      <if test="description != null" >
        description = #{description,jdbcType=VARCHAR},
      </if>
      <if test="purchaseDate != null" >
        purchase_date = #{purchaseDate,jdbcType=TIMESTAMP},
      </if>
      <if test="installDate != null" >
        install_date = #{installDate,jdbcType=TIMESTAMP},
      </if>
      <if test="serviceId != null" >
        service_id = #{serviceId,jdbcType=INTEGER},
      </if>
      <if test="payBalance != null" >
        pay_balance = #{payBalance,jdbcType=DECIMAL},
      </if>
      <if test="register != null" >
        register = #{register,jdbcType=VARCHAR},
      </if>
      <if test="registerType != null" >
        register_type = #{registerType,jdbcType=VARCHAR},
      </if>
      <if test="registerCode != null" >
        register_code = #{registerCode,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        status = #{status,jdbcType=VARCHAR},
      </if>
      <if test="flagAvaliable != null" >
        flag_avaliable = #{flagAvaliable,jdbcType=BIT},
      </if>
      <if test="flagDeleted != null" >
        flag_deleted = #{flagDeleted,jdbcType=BIT},
      </if>
      <if test="flagChargeSingal != null" >
        flag_charge_singal = #{flagChargeSingal,jdbcType=BIT},
      </if>
      <if test="flagInfoConfirm != null" >
        flag_info_confirm = #{flagInfoConfirm,jdbcType=BIT},
      </if>
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createPerson != null" >
        create_person = #{createPerson,jdbcType=INTEGER},
      </if>
      <if test="updatePerson != null" >
        update_person = #{updatePerson,jdbcType=INTEGER},
      </if>
      <if test="updateTime != null" >
        update_time = #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="brandId != null" >
        brand_id = #{brandId,jdbcType=INTEGER},
      </if>
      <if test="flagVendor != null" >
        flag_vendor = #{flagVendor,jdbcType=BIT},
      </if>
      <if test="serviceContactId != null" >
        service_contact_id = #{serviceContactId,jdbcType=INTEGER},
      </if>
      <if test="productCode != null" >
        product_code = #{productCode,jdbcType=VARCHAR},
      </if>
      <if test="ispService != null" >
        isp_service = #{ispService,jdbcType=VARCHAR},
      </if>
      <if test="flagChargeAgency != null" >
        flag_charge_agency = #{flagChargeAgency,jdbcType=BIT},
      </if>
      <if test="memo != null" >
        memo = #{memo,jdbcType=VARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <select id="getListByStoreId" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select
    <include refid="Base_Column_List" />
    from dmi_comm_product_marketing_campaign
    where store_id = #{storeId,jdbcType=INTEGER}
    and flag_deleted = 0
  </select>

  <select id="getPageListByStoreId" resultType="com.teekee.waterdropservice.entity.dmi.DmiCommProductMarketingCampaignPage" parameterType="java.lang.Integer" >
    select
    campaign.id, campaign.store_id storeId, campaign.company_id companyId, campaign.campaign_name campaignName, campaign.description, campaign.purchase_date purchaseDate, campaign.install_date installDate,
    campaign.service_id serviceId, campaign.pay_balance payBalance, campaign.register, campaign.register_type registerType, campaign.register_code registerCode, campaign.status,
    campaign.flag_avaliable flagAvaliable, campaign.flag_deleted flagDeleted, campaign.flag_charge_singal flagChargeSingal, campaign.flag_info_confirm flagInfoConfirm, campaign.create_time createTime,
    campaign.create_person createPerson, campaign.update_person updatePerson, campaign.update_time updateTime, campaign.brand_id brandId, campaign.flag_vendor flagVendor, campaign.service_contact_id serviceContactId, campaign.product_code productCode, campaign.isp_service ispService,
    campaign.flag_charge_agency flagChargeAgency, campaign.memo,
    brand.brand_name brandName,
    service.service_name serviceName
    from dmi_comm_product_marketing_campaign campaign
    left join cfg_communication_brand brand on brand.id = campaign.brand_id
    left join bif_communication_service service on service.id = campaign.service_id
    where campaign.store_id = #{storeId,jdbcType=INTEGER}
    and campaign.flag_deleted = 0
    order by campaign.update_time desc
  </select>
</mapper>